<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-time Markdown Previewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align items to the top */
            min-height: 100vh;
            padding-top: 20px; /* Add some top padding */
        }

        .container {
            display: flex;
            width: 90%;
            max-width: 1200px;
            gap: 20px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .editor, .preview {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow-y: auto; /* Add scroll for long content */
            height: 80vh; /* Set a fixed height */
        }

        .editor textarea {
            width: 100%;
            height: 100%; /* Make textarea fill the editor div */
            border: none;
            resize: none;
            outline: none;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .preview h1, .preview h2, .preview h3, .preview h4, .preview h5, .preview h6 {
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }

        .preview p {
            margin-bottom: 1em;
            line-height: 1.6;
        }

        .preview ul, .preview ol {
            margin-bottom: 1em;
            padding-left: 20px;
        }

        .preview code {
            background-color: #eee;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace;
        }

        .preview pre {
            background-color: #eee;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }

        .preview blockquote {
            border-left: 3px solid #ccc;
            padding-left: 10px;
            margin-left: 0;
            color: #666;
        }

        .preview hr {
            border: 0;
            border-top: 1px solid #ddd;
            margin: 1em 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="editor">
            <h2>Markdown Input</h2>
            <textarea id="markdownInput" placeholder="Type your Markdown here..."></textarea>
        </div>
        <div class="preview">
            <h2>HTML Preview</h2>
            <div id="htmlPreview"></div>
        </div>
    </div>

    <script>
        const markdownInput = document.getElementById('markdownInput');
        const htmlPreview = document.getElementById('htmlPreview');

        function simpleMarkdownToHtml(markdown) {
            let html = markdown;

            // Headings (h1 to h6)
            html = html.replace(/^###### (.*$)/gim, '<h6>$1</h6>');
            html = html.replace(/^##### (.*$)/gim, '<h5>$1</h5>');
            html = html.replace(/^#### (.*$)/gim, '<h4>$1</h4>');
            html = html.replace(/^### (.*$)/gim, '<h3>$1</h3>');
            html = html.replace(/^## (.*$)/gim, '<h2>$1</h2>');
            html = html.replace(/^# (.*$)/gim, '<h1>$1</h1>');

            // Bold (**text** or __text__)
            html = html.replace(/\*\*(.*?)\*\*/gim, '<strong>$1</strong>');
            html = html.replace(/__(.*?)__/gim, '<strong>$1</strong>');

            // Italic (*text* or _text_)
            html = html.replace(/\*(.*?)\*/gim, '<em>$1</em>');
            html = html.replace(/_(.*?)_/gim, '<em>$1</em>');

            // Strikethrough (~~text~~)
            html = html.replace(/~~(.*?)~~/gim, '<del>$1</del>');

            // Blockquotes (> text)
            html = html.replace(/^> (.*$)/gim, '<blockquote>$1</blockquote>');

            // Unordered Lists (*, -, +)
            html = html.replace(/^\s*[\*\-\+]\s+(.*)/gim, '<ul><li>$1</li></ul>'); // Basic, needs improvement for multi-line lists
            // This simple list regex needs refinement for nested or multi-item lists.
            // A more robust parser would handle list contexts.
            // For simplicity, we'll re-wrap consecutive list items.
            html = html.replace(/<\/ul>\s*<ul>/gim, '');


            // Ordered Lists (1. text)
            html = html.replace(/^\s*\d\.\s+(.*)/gim, '<ol><li>$1</li></ol>');
            html = html.replace(/<\/ol>\s*<ol>/gim, '');

            // Horizontal Rule (---, ***, ___)
            html = html.replace(/^(---|___|\*\*\*)$/gim, '<hr>');

            // Inline Code (`code`)
            html = html.replace(/`(.*?)`/gim, '<code>$1</code>');

            // Code Blocks (```lang\ncode\n``` or ```\ncode\n```)
            html = html.replace(/```(\w*)\n([\s\S]*?)\n```/gim, function(match, lang, code) {
                const languageClass = lang ? ` class="language-${lang}"` : '';
                // Basic escaping for HTML within code blocks
                const escapedCode = code.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                return `<pre><code${languageClass}>${escapedCode}</code></pre>`;
            });


            // Links ([text](url))
            html = html.replace(/\[(.*?)\]\((.*?)\)/gim, '<a href="$2">$1</a>');

            // Images (![alt text](url))
            html = html.replace(/!\[(.*?)\]\((.*?)\)/gim, '<img src="$2" alt="$1">');

            // Paragraphs (handle newlines, very basic)
            // This is a very simplified paragraph handling.
            // A real parser would consider block elements.
            html = html.split(/\n\n+/).map(paragraph => {
                if (paragraph.trim().startsWith('<') && paragraph.trim().endsWith('>')) {
                    // Don't wrap if it already looks like an HTML block element
                    return paragraph;
                }
                return paragraph.trim() ? `<p>${paragraph.trim()}</p>` : '';
            }).join('');

            // Clean up empty paragraphs that might result from the split
            html = html.replace(/<p><\/p>/g, '');


            return html;
        }

        function updatePreview() {
            const markdownText = markdownInput.value;
            const htmlOutput = simpleMarkdownToHtml(markdownText);
            htmlPreview.innerHTML = htmlOutput;
        }

        // Event listener for input changes
        markdownInput.addEventListener('input', updatePreview);

        // Initial preview for any default text (if any)
        updatePreview();
    </script>
</body>
</html>
